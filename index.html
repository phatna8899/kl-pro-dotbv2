<!--
    BẢNG ĐIỀU KHIỂN TRÌNH BÀY KẾ HOẠCH NÂNG CẤP LMS DOTB 2.0
    Sử dụng Tailwind CSS và JavaScript để tạo giao diện Tab và Accordion tương tác.
-->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kế hoạch Nâng cấp LMS DotB V2.0</title>
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tải Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Thiết lập font Inter */
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        
        /* KHÔI PHỤC LẠI STYLE CHO ACCORDION (COLLAPSE/EXPAND) */
        .accordion-content {
            transition: all 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            padding: 0 1rem;
        }
        .accordion-content.open {
            max-height: 3500px; /* Tăng max-height để phù hợp với bảng chi phí lớn hơn */
            opacity: 1;
            padding: 1rem;
        }

        /* Highlight cho Tab/Sub-tab active */
        .tab-button.active {
            color: #1e40af; /* Blue-700 */
            border-bottom-width: 3px;
            border-color: #1e40af;
            font-weight: 600;
        }
        .sub-tab-button.active {
            color: #059669; /* Emerald-600 */
            background-color: #ecfdf5; /* Emerald-50 */
            font-weight: 600;
            border-radius: 0.5rem;
        }
        /* Style cho highlight nội dung (thay thế **) */
        .dotb-highlight {
            font-weight: 600;
            color: #1e40af; /* Blue-700 */
        }
        /* Style riêng cho Qui trình Thủ công */
        .process-title-2 {
            background-color: #e0f2f1; /* Teal-50 */
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #115e59; /* Teal-800 */
            margin-top: 10px;
            display: inline-block;
        }
        .indent-line {
            position: relative;
            padding-left: 20px;
        }
        .indent-line-level-2 {
            margin-left: 10px;
            border-left: 2px solid #bdbdbd; /* Gray line */
            padding-left: 15px;
        }
        .indent-line-level-3 {
            margin-left: 10px;
            border-left: 1px dashed #bdbdbd; /* Gray line */
            padding-left: 15px;
        }
        /* Style cho header accordion Timeline */
        .timeline-accordion-header {
            background-color: #f0f4ff; /* Indigo-50 */
            border-bottom: 1px solid #c7d2fe; /* Indigo-200 */
        }
        /* Style cho bảng Chi phí */
        .cost-header {
            background-color: #047857; /* Emerald-700 */
            color: white;
        }
        .cost-sub-header {
            background-color: #d1fae5; /* Emerald-100 */
            font-weight: 600;
            color: #065f46; /* Emerald-800 */
        }
        .cost-total {
            background-color: #10b981; /* Emerald-500 */
            color: white;
            font-weight: 700;
        }
        .cost-comparison {
            background-color: #fef3c7; /* Amber-100 */
            font-weight: 700;
            color: #92400e; /* Amber-800 */
        }
        .cost-total-capex {
            background-color: #fecaca; /* Red-100 */
            color: #991b1b; /* Red-800 */
            font-weight: 700;
        }
        /* Style đặc biệt cho Server Private Accordion */
        .server-private-accordion-header {
            background-color: #fffbeb; /* Amber-50 */
            border-top: 2px solid #fbbf24; /* Amber-400 */
        }

/* ANIMATION CHO SERVER PRIVATE */
        @keyframes blink-warning {
            0% { background-color: #fffbeb; } /* Amber-50 (Màu nền khi đóng) */
            50% { background-color: #fee2e2; } /* Red-100 (Màu đỏ đậm hơn) */
            100% { background-color: #fffbeb; }
        }
        
        .blinking-important {
            animation: blink-warning 2s infinite;
        }
        /* Khi mở ra (open), tắt hiệu ứng blink để dễ đọc */
        .accordion-content.open + .blinking-important,
        .accordion-content.open ~ button.blinking-important { 
            animation: none;
            background-color: #fffbeb !important;
        }

        /* Khi Accordion đang mở, loại bỏ hiệu ứng chớp ở nút (vì nội dung đang hiển thị) */
        .server-private-accordion-header.no-blink {
            animation: none;
            background-color: #fffbeb !important;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <header class="mb-8">
        <div class="flex items-center space-x-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M12 2a10 10 0 0 0 0 20c.98-1.57 1.25-3.22.42-5.32l-1.42-3.32a3 3 0 0 0-.08-2.61c.4-1.22 1.45-2.02 2.65-2.07l.3-.01c1.2.06 2.37.91 2.82 2.13a3.5 3.5 0 0 1-.35 3.1l-1.63 3.32c-.83 2.1.04 4.09 1.48 5.66A10 10 0 0 0 12 2Z"></path></svg>
            <h1 class="text-3xl font-bold text-gray-800">GIẢI PHÁP NÂNG CẤP DOTB V2.0</h1>
        </div>
        <p class="text-lg text-gray-500 mt-1"></p>
    </header>

    <!-- KHU VỰC TAB CHÍNH -->
    <div class="bg-white shadow-xl rounded-xl p-0">
        <div class="border-b border-gray-200">
            <div role="tablist" class="flex flex-wrap -mb-px px-6 pt-4">
                <button role="tab" data-tab-id="tab-1" class="tab-button active py-3 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 transition duration-150 ease-in-out border-b-3 border-transparent" onclick="switchTab('tab-1')">
                    1. Mục tiêu & Giải pháp
                </button>
                <button role="tab" data-tab-id="tab-2" class="tab-button py-3 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 transition duration-150 ease-in-out border-b-3 border-transparent" onclick="switchTab('tab-2')">
                    2. Kế hoạch (Workflow & Hạ tầng)
                </button>
                <button role="tab" data-tab-id="tab-3" class="tab-button py-3 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 transition duration-150 ease-in-out border-b-3 border-transparent" onclick="switchTab('tab-3')">
                    3. Timeline (Lộ trình)
                </button>
                <button role="tab" data-tab-id="tab-4" class="tab-button py-3 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 transition duration-150 ease-in-out border-b-3 border-transparent" onclick="switchTab('tab-4')">
                    4. Nguồn lực & Chi phí
                </button>
            </div>
        </div>

        <!-- NỘI DUNG TAB 1: MỤC TIÊU VÀ GIẢI PHÁP -->
        <div id="tab-1" role="tabpanel" class="tab-content p-6">

            <!-- KHU VỰC SUB-TAB CHO TAB 1 -->
            <div class="flex space-x-4 mb-6 border-b pb-4">
                <button data-sub-tab-id="sub-tab-1-1" data-main-tab-id="tab-1" class="sub-tab-button active px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-1-1', 'tab-1')">
                    1.1. Vấn đề & Mục tiêu Cốt lõi
                </button>
                <button data-sub-tab-id="sub-tab-1-2" data-main-tab-id="tab-1" class="sub-tab-button px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-1-2', 'tab-1')">
                    1.2. Phân tích & Lựa chọn Giải pháp
                </button>
            </div>

            <!-- NỘI DUNG SUB-TAB 1.1 -->
            <div id="sub-tab-1-1" class="sub-tab-content">
                <!-- VẤN ĐỀ CỐT LÕI -->
                <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg risk-highlight mb-6">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-600 mr-3"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg>
                        <h3 class="text-xl font-semibold text-red-800">Vấn đề Cốt lõi: Rủi ro Vận hành thủ công (Pain Point)</h3>
                    </div>
                    <p class="mt-2 text-red-700">Quy trình vận hành HRT và Giáo viên hiện đang thực hiện <span class="dotb-highlight">thủ công bằng tay</span>, tương tác bằng thông báo thủ công sau khi task hoàn thành. Điều này dẫn đến:</p>
                    <ul class="list-disc ml-6 space-y-1 text-red-700 mt-2">
                        <li><span class="dotb-highlight">Rủi ro cao</span> về <span class="dotb-highlight">"Miss Thông tin"</span> giữa các bên.</li>
                        <li><span class="dotb-highlight">Trì trệ</span> chu kỳ <span class="dotb-highlight">Chăm sóc Khách hàng (CSKH)</span>.</li>
                        <li><span class="dotb-highlight">Mất tính Chủ động</span> trong việc theo dõi tiến độ học viên.</li>
                    </ul>
                </div>

<div class="mb-6">
    <button class="flex justify-between items-center w-full bg-gray-100 p-3 text-left font-medium text-gray-700 rounded-lg hover:bg-gray-200 transition duration-150" onclick="toggleAccordion('manual-process')">
        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path></svg> Chi tiết Qui trình Thủ công Hiện tại (HRT/GV)</span>
        
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-300 accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </button>
    
<div id="manual-process" class="accordion-content bg-white border border-t-0 rounded-b-lg">
        <div class="space-y-4 text-gray-700">
            <h4 class="font-bold text-gray-800">1. Qui trình làm việc của HRT và giáo viên:</h4>

            <div class="indent-line">
                <span class="process-title-2">1.1. Mở lớp mới (05. Trackers)</span>
                <div class="indent-line-level-2">
                    <ul class="list-disc ml-4 space-y-1 text-sm mt-2">
                        <li><span class="dotb-highlight">Class tracker</span>: số buổi học, mỗi buổi học: ngày dạy, lesson dạy, mục tiêu lesson, nội dung dạy ở trang mấy của sách) -> giáo viên xem file này và checklist sau mỗi buổi học và xem chuẩn bị buổi học tiếp theo.</li>
                        <li><span class="dotb-highlight">HRT 20-Minute Practice</span> -> HRT xem để tutor đầu giờ cho bé.</li>
                    </ul>
                </div>
            </div>

            <div class="indent-line">
                <span class="process-title-2">1.2. Student on progress</span>

                <div class="indent-line-level-2">
                    <p class="font-medium text-gray-800 mt-2">1.2.1. Ghi nhận tình hình học tập của bé hằng ngày</p>
                    <ul class="list-disc ml-4 space-y-1 text-sm">
                        <li>Theo dõi lịch học KPTN, tình hình học các môn KPTN.</li>
                        <li>Chụp hình ảnh bé trong buổi học -> gửi phụ huynh.</li>
                        <li>Trao đổi với phụ huynh về các buổi học khi cần thiết.</li>
                    </ul>
                </div>

                <div class="indent-line-level-2">
                    <p class="font-medium text-gray-800 mt-2">1.2.2. Xử lý những trường hợp đặc biệt: (06. Feedback on Student's Report)</p>
                    <ul class="list-disc ml-4 space-y-1 text-sm">
                        <li>Học viên có học lực không tốt.</li>
                        <li>Học viên có những hành vi bất ổn.</li>
                        <li>Trao đổi với giáo viên và phản hồi với phụ huynh.</li>
                    </ul>
                </div>

                <div class="indent-line-level-2">
                    <p class="font-medium text-gray-800 mt-2">1.2.3. Ghi nhận lộ trình học tập của bé</p>

                    <div class="indent-line-level-3">
                        <p class="font-normal text-gray-700 mt-2">1.2.3.1. Quiz test (07. Assessment_Gradebook)</p>
                        <ul class="list-disc ml-4 space-y-1 text-xs">
                            <li>2 units sẽ làm một bài quiz test.</li>
                            <li>HRT copy template cho từng giáo viên bao gồm thông tin học viên -> giáo viên nhập điểm -> Generate AI Feedback -> HRT copy/paste nội dung gửi phụ huynh.</li>
                        </ul>
                    </div>

                    <div class="indent-line-level-3">
                        <p class="font-normal text-gray-700 mt-2">1.2.3.2. Nhận xét học tập từng Unit</p>
                        <ul class="list-disc ml-4 space-y-1 text-xs">
                            <li>Thực hiện sau mỗi unit (6 buổi / unit).</li>
                            <li>Nhập thông tin lên DotB mục “teacher comment” -> gửi phụ huynh. Gồm thông tin: thái độ học tập, khả năng tiếp thu kiến thức, bám sát theo cá nhân hóa lộ trình học.</li>
                        </ul>
                    </div>

                    <div class="indent-line-level-3">
                        <p class="font-normal text-gray-700 mt-2">1.2.3.3. Gradebook: (07. Assessment_Gradebook)</p>
                        <ul class="list-disc ml-4 space-y-1 text-xs">
                            <li>Trước ngày kiểm tra một tuần, HRT chuẩn bị template gradebook -> sau khi kiểm tra giáo viên nhập điểm và nhận xét -> HRT dịch gradebook và gửi phụ huynh.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="indent-line">
                <span class="process-title-2">1.3. Renew</span>
                <div class="indent-line-level-2">
                    <ul class="list-disc ml-4 space-y-1 text-sm mt-2">
                        <li>Theo dõi và tư vấn phụ huynh tái phí.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

                <!-- MỤC TIÊU DỰ ÁN -->
                <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 rounded-lg dotb-green">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-600 mr-3"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"></path><path d="M12 7v5l3 3"></path></svg>
                        <h3 class="text-xl font-semibold text-emerald-800">Mục tiêu Dự án (LMS V2.0 - Khắc phục Vấn đề)</h3>
                    </div>
                    <p class="mt-2 text-emerald-700">Xây dựng hệ thống <span class="dotb-highlight">"Workflow tự động, tập trung"</span> ngay trên hệ thống DotB để xử lý các luồng công việc liên quan đến chăm sóc khách hàng.</p>
                    <ul class="list-disc ml-6 space-y-1 text-emerald-700 mt-2">
                        <li>Đảm bảo <span class="dotb-highlight">tính đồng nhất dữ liệu</span> từ một hệ thống duy nhất.</li>
                        <li><span class="dotb-highlight">Khả thi kỹ thuật</span> và <span class="dotb-highlight">kiểm soát chi phí</span> hiệu quả.</li>
                        <li>Khắc phục triệt để vấn đề <span class="dotb-highlight">"miss thông tin"</span> và <span class="dotb-highlight">"trì trệ CSKH"</span>.</li>
                    </ul>
                </div>
            </div>

            <!-- NỘI DUNG SUB-TAB 1.2 -->
            <div id="sub-tab-1-2" class="sub-tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 mr-2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                    Phân tích & Lựa chọn Giải pháp
                </h3>

                <!-- BẢNG SO SÁNH GIẢI PHÁP -->
                <p class="text-lg text-gray-700 mb-4">IT đã cân nhắc 2 giải pháp chính để xây dựng Workflow:</p>
                <div class="overflow-x-auto shadow-md rounded-lg mb-6">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">Tiêu chí</th>
                                <th class="px-6 py-3 text-left text-xs font-bold text-red-600 uppercase tracking-wider">Giải pháp 1: Tích hợp Công cụ Workflow bên ngoài (Tích hợp)</th>
                                <th class="px-6 py-3 text-left text-xs font-bold text-emerald-600 uppercase tracking-wider">Giải pháp 2: Nâng cấp Workflow trên DOTB (Đề xuất)</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Tính Khả thi</td>
                                <td class="px-6 py-4 text-sm text-red-500"><span class="dotb-highlight">Hạn chế:</span> Chưa tìm được đối tác phù hợp (kỹ thuật, chi phí...).</td>
                                <td class="px-6 py-4 text-sm text-emerald-600 font-semibold"><span class="dotb-highlight text-emerald-600">Khả thi:</span> DotB có thể đáp ứng ngay trên hệ thống hiện tại đang vận hành.</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Đồng nhất Dữ liệu</td>
                                <td class="px-6 py-4 text-sm text-red-500"><span class="dotb-highlight">Rủi ro cao:</span> Dễ xảy ra lỗi đồng bộ dữ liệu (Data Sync) giữa hai hệ thống.</td>
                                <td class="px-6 py-4 text-sm text-emerald-600 font-semibold"><span class="dotb-highlight text-emerald-600">Ưu điểm:</span> Thuần tiện, đảm bảo dữ liệu đồng nhất từ một hệ thống duy nhất.</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Chi phí & Tích hợp</td>
                                <td class="px-6 py-4 text-sm text-red-500"><span class="dotb-highlight">Phát sinh:</span> Chi phí mua/thuê công cụ và chi phí tích hợp API phức tạp.</td>
                                <td class="px-6 py-4 text-sm text-emerald-600 font-semibold"><span class="dotb-highlight text-emerald-600">Tiết kiệm:</span> Giảm thiểu chi phí ngoại sinh, tập trung đầu tư vào nâng cấp lõi.</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Trải nghiệm Người dùng</td>
                                <td class="px-6 py-4 text-sm text-red-500">HRT/GV phải thao tác trên nhiều nền tảng (DotB + Công cụ ngoài).</td>
                                <td class="px-6 py-4 text-sm text-emerald-600 font-semibold">Quy trình làm việc tập trung, dễ đào tạo và sử dụng.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- KẾT LUẬN LỰA CHỌN GIẢI PHÁP -->
                <div class="bg-emerald-100 border-l-4 border-emerald-500 p-4 rounded-lg">
                    <h4 class="font-bold text-lg text-emerald-800 mb-1">Kết luận Lựa chọn Giải pháp:</h4>
                    <p class="text-emerald-700">Giải pháp số 2 (<span class="dotb-highlight">Nâng cấp DotB</span>) là <span class="dotb-highlight">khả thi và tiềm năng nhất</span>, đáp ứng mục đích cốt lõi: tận dụng đặc tính kỹ thuật, thuận tiện đồng nhất dữ liệu và kiểm soát chi phí hiệu quả.</p>
                </div>
            </div>
        </div>

        <!-- NỘI DUNG TAB 2: KẾ HOẠCH -->
        <div id="tab-2" role="tabpanel" class="tab-content p-6 hidden">
            <p class="text-gray-600 mb-6 italic">Kế hoạch triển khai chia thành 2 Giai đoạn chính: Nâng cấp hạ tầng/Database lên V2.0 và Xây dựng Workflow tự động hóa quy trình nghiệp vụ (HRT/GV).</p>
            <!-- KHU VỰC SUB-TAB CHO TAB 2 -->
            <div class="flex space-x-4 mb-6 border-b pb-4">
                <button data-sub-tab-id="sub-tab-2-1" data-main-tab-id="tab-2" class="sub-tab-button active px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-2-1', 'tab-2')">
                    2.1. Nâng cấp DOTB lên V2.0 & Hạ tầng
                </button>
                <button data-sub-tab-id="sub-tab-2-2" data-main-tab-id="tab-2" class="sub-tab-button px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-2-2', 'tab-2')">
                    2.2. Xây dựng Luồng Workflow (Template Journey)
                </button>
            </div>

            <!-- NỘI DUNG SUB-TAB 2.1 -->
            <div id="sub-tab-2-1" class="sub-tab-content">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 mr-2"><path d="M12 2v6"></path><path d="M12 18v4"></path><path d="M4 8H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2"></path><path d="M20 8h2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2"></path><path d="M8 12h8"></path><path d="M4 12v0"></path><path d="M20 12v0"></path></svg>
                    Giai đoạn 1: Nâng cấp DOTB lên V2.0
                </h3>
                <div class="space-y-4 text-gray-700">
                    <p>Để có thể xây dựng được qui trình workflow đề ra, cần <span class="dotb-highlight">upgrade DotB từ V1 hiện tại lên V2</span>. V2 có những cải tiến dựa trên cấu trúc cơ sở dữ liệu mới, nhằm cải tiến các module hoạt động ổn định và tối ưu hơn.</p>

<div class="mb-6">
    <button class="flex justify-between items-center w-full bg-indigo-50 p-3 text-left font-medium text-indigo-700 rounded-lg hover:bg-indigo-100 transition duration-150" onclick="toggleAccordion('v2-improvements')">
        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-2"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></svg> Chi tiết Cải tiến V2.0 (Database & Module)</span>
        
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-300 accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </button>
    
<div id="v2-improvements" class="accordion-content bg-white border border-t-0 rounded-b-lg">
        <h4 class="font-bold text-lg mb-4 text-gray-800">So sánh các Module của EMS 1.0 vs EMS 2.0 (DotB V1 vs V2)</h4>
        <div class="flex flex-col space-y-8 md:space-y-0 md:flex-row md:space-x-4 overflow-x-auto p-2">
            <div class="flex-shrink-0 w-full md:w-1/3 min-w-[300px] border rounded-lg shadow-md overflow-hidden">
                <h5 class="p-3 bg-blue-500 text-white font-semibold text-center">Bộ phận Marketing & Tuyển sinh</h5>
                <img src="v1v2_01.png" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Marketing+Placeholder'" alt="So sánh Module Marketing & Tuyển sinh" class="w-full h-auto object-contain p-2">
            </div>
            <div class="flex-shrink-0 w-full md:w-1/3 min-w-[300px] border rounded-lg shadow-md overflow-hidden">
                <h5 class="p-3 bg-blue-500 text-white font-semibold text-center">Bộ phận Kế toán & BOD</h5>
                <img src="v1v2_02.png" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Accounting+Placeholder'" alt="So sánh Module Kế toán & BOD" class="w-full h-auto object-contain p-2">
            </div>
            <div class="flex-shrink-0 w-full md:w-1/3 min-w-[300px] border rounded-lg shadow-md overflow-hidden">
                <h5 class="p-3 bg-blue-500 text-white font-semibold text-center">Bộ phận Học vụ</h5>
                <img src="v1v2_03.png" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Academic+Placeholder'" alt="So sánh Module Học vụ" class="w-full h-auto object-contain p-2">
            </div>
        </div>
    </div>
</div>

                    <!-- GIẢI PHÁP HẠ TẦNG (SERVER RIÊNG) - ĐÃ CHUYỂN THÀNH ACCORDION VÀ CÓ HIỆU ỨNG BLINKING -->
                    <div class="mb-6 border border-yellow-500 rounded-lg overflow-hidden">
                         <button class="flex justify-between items-center w-full p-4 text-left font-bold text-yellow-800 server-private-accordion-header blinking-important" onclick="toggleAccordion('server-private-solution')">
                            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-2"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="10" y1="6" x2="10.01" y2="6"></line><line x1="14" y1="6" x2="14.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line><line x1="10" y1="18" x2="10.01" y2="18"></line><line x1="14" y1="18" x2="14.01" y2="18"></line></svg>
                            GIẢI PHÁP HẠ TẦNG: SERVER PRIVATE (QUAN TRỌNG VÀ CẦN THIẾT)</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-300 accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </button>
                        <!-- Mặc định đóng -->
                        <div id="server-private-solution" class="accordion-content bg-white">
                            <ul class="list-disc ml-6 mt-2 text-gray-700 space-y-3">
                                <li class="font-bold text-lg text-red-700">Server Private này là <span class="dotb-highlight text-red-700">cực kì cần thiết</span> để đảm bảo hiệu suất vận hành ổn định cho V2.0.</li>
                                <li>Nhằm đảm bảo hiệu suất tối đa, cần chạy DotB V2 trên <span class="dotb-highlight text-yellow-800">Server Riêng</span> thay vì server Public hiện tại của DotB.</li>
                                <li>**Cấu trúc Database Tối ưu:** Hệ thống được thiết lập cấu trúc <span class="dotb-highlight text-yellow-800">Master/Slave</span> và <span class="dotb-highlight text-yellow-800">Load Balancing</span>, tách biệt Web Interface và Database Server.</li>
                                <li>**Lợi ích Hiệu suất:** Nhờ cấu trúc tối ưu, thao tác người dùng (HRT/GV) sẽ <span class="dotb-highlight text-yellow-800">mượt mà, phản hồi nhanh, hạn chế lag</span>, ngay cả khi có lượng truy cập lớn.</li>
                                <li>**Lợi ích Phân tích Dữ liệu:** Tối ưu cho việc phân tích, chạy các báo cáo phức tạp, và cho phép mở rộng tích hợp các công cụ chuyên query/tạo dashboard/report như <span class="dotb-highlight text-yellow-800">BigQuery và PowerBI</span>.</li>
                                <li>Server Riêng sẽ đáp ứng được tác vụ gửi <span class="dotb-highlight text-yellow-800">hình ảnh/video</span> định kì ngay trên DotB và app iKAPLA, một tác vụ nặng mà Server Public khó đáp ứng ổn định.</li>
                                <li>Chi phí cho phần này sẽ được chi tiết ở mục <span class="dotb-highlight text-yellow-800">4.2. Dự toán Chi phí</span>.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NỘI DUNG SUB-TAB 2.2 -->
            <div id="sub-tab-2-2" class="sub-tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-600 mr-2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><path d="M7 7h10"></path><path d="M7 12h10"></path><path d="M7 17h10"></path></svg>
                    Giai đoạn 2: Xây dựng Luồng Workflow
                </h3>
                <div class="space-y-4 text-gray-700">
                    <p class="mb-4">Trên DotB sẽ được định nghĩa là các <span class="dotb-highlight">Template Journey</span> nhằm chuyển đổi quy trình thủ công sang tự động. Cấu trúc chuẩn hóa sẽ là:</p>

                    <!-- Cấu trúc Workflow -->
                    <div class="flex flex-col space-y-4 sm:flex-row sm:space-y-0 sm:space-x-4 items-start mb-8">
                        <div class="flex-1 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center shadow-sm">
                            <p class="font-bold text-lg text-blue-700">Template Journey</p>
                            <p class="text-sm">Đại diện cho một chu kỳ lớn (Ví dụ: "Hành trình chăm sóc Học viên mới")</p>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 hidden sm:block mt-6"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
                        <div class="flex-1 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center shadow-sm">
                            <p class="font-bold text-lg text-blue-700">Stage (Giai đoạn)</p>
                            <p class="text-sm">Định nghĩa các mốc quan trọng (Ví dụ: "Giai đoạn Học Unit 1", "Giai đoạn Kiểm tra Quiz")</p>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 hidden sm:block mt-6"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
                        <div class="flex-1 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center shadow-sm">
                            <p class="font-bold text-lg text-blue-700">Task (Tác vụ)</p>
                            <p class="text-sm">Định nghĩa các hành động cụ thể (Ví dụ: "GV nhập điểm", "Hệ thống tự động gửi PH")</p>
                        </div>
                    </div>

                    <h4 class="font-semibold text-lg text-gray-800 mt-6 mb-3">Minh họa Cấu trúc Workflow:</h4>

                    <!-- 1. Minh họa Template Journey và Stage (Giai đoạn) -->
                    <div class="mb-8 p-4 border rounded-lg shadow-sm">
                        <h4 class="font-bold text-lg mb-4 text-gray-800">1. Minh họa Template Journey và Stage (Giai đoạn)</h4>
                        <img src="journey_01.jpeg" onerror="this.onerror=null; this.src='https://placehold.co/800x400/5e35b1/ffffff?text=Template+Journey+Placeholder'" alt="Minh họa Template Journey và Stage" class="w-full h-auto object-contain rounded-lg border">
                    </div>

                    <!-- 2. Minh họa chi tiết Task (Tác vụ) -->
					<div id="v2-improvements" class="accordion-content bg-white border border-t-0 rounded-b-lg open">
						<h4 class="font-bold text-lg mb-4 text-gray-800">Task (tác vụ)</h4>
						<div class="flex flex-col space-y-8 md:space-y-0 md:flex-row md:space-x-4 overflow-x-auto p-2">
							
							<div class="flex-shrink-0 w-full md:w-1/3 min-w-[300px] border rounded-lg shadow-md overflow-hidden flex flex-col">
								<h5 class="p-3 bg-blue-500 text-white font-semibold text-center">Định nghĩa Task</h5>
								
								<img src="journey_03.jpeg" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Marketing+Placeholder'" alt="So sánh Module Marketing & Tuyển sinh" class="w-full h-64 object-contain p-2">
								<img src="journey_02.jpeg" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Marketing+Placeholder'" alt="So sánh Module Marketing & Tuyển sinh" class="w-full h-64 object-contain p-2">
							</div>
							
							<div class="flex-shrink-0 w-full md:w-2/3 min-w-[300px] border rounded-lg shadow-md overflow-hidden flex flex-col">
								<h5 class="p-3 bg-blue-500 text-white font-semibold text-center">Task Daskboard</h5>
								
								<img src="journey_04.jpg" onerror="this.onerror=null; this.src='https://placehold.co/400x400/1e40af/ffffff?text=Academic+Placeholder'" alt="So sánh Module Học vụ" class="w-full h-full object-contain p-2 flex-1">
							</div>

						</div>
					</div>
                </div>
            </div>
        </div>

        <!-- NỘI DUNG TAB 3: TIMELINE (LỘ TRÌNH) -->
        <div id="tab-3" role="tabpanel" class="tab-content p-6 hidden">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600 mr-2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                3. Timeline: Lộ trình Triển khai Dự kiến
            </h3>
            <p class="text-gray-600 mb-6 italic">Lộ trình triển khai được chia thành 2 Giai đoạn chính. Giai đoạn 1 tập trung vào Upgrade Core và Giai đoạn 2 tập trung vào Xây dựng Workflow Nghiệp vụ.</p>

            <!-- Accordion Giai đoạn 1: UPGRADE DOTB V2 -->
            <div class="mb-8 border border-indigo-300 rounded-lg overflow-hidden">
                <button class="flex justify-between items-center w-full p-4 text-left font-bold text-indigo-800 timeline-accordion-header" onclick="toggleAccordion('timeline-step-1')">
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-2"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"></path><path d="M12 7v5l3 3"></path></svg> Giai đoạn 1: UPGRADE DOTB V2 (Tổng 22 ngày)</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-300 accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
                <!-- Mặc định đóng -->
                <div id="timeline-step-1" class="accordion-content bg-white">
                    <div class="overflow-x-auto shadow-md rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200 text-sm">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left w-1/12">Giai đoạn</th>
                                    <th scope="col" class="px-6 py-3 text-left w-6/12">Nội dung chính</th>
                                    <th scope="col" class="px-6 py-3 text-center w-1/12">Thời lượng (Ngày)</th>
                                    <th scope="col" class="px-6 py-3 text-left w-2/12">Người phụ trách</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Giai đoạn 1 -->
                                <tr class="bg-gray-50 font-semibold text-gray-900"><td colspan="4" class="px-6 py-2">Giai đoạn 1: Migration dữ liệu cơ bản</td></tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">1.1</td>
                                    <td class="px-6 py-3">Tiến hành migrate dữ liệu từ EMS 1 lên EMS 2 bản mặc định (default). Không bao gồm các chức năng customize. <br><span class="text-xs text-gray-500 italic">Mục tiêu: kiểm tra tính toàn vẹn dữ liệu, hiệu năng hệ thống, và chuẩn bị nền tảng.</span></td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">2</td>
                                    <td class="px-6 py-3">Dev Team</td>
                                </tr>

                                <!-- Giai đoạn 2 -->
                                <tr class="bg-gray-50 font-semibold text-gray-900"><td colspan="4" class="px-6 py-2">Giai đoạn 2: Đánh giá & Chốt phương án thay thế/customize</td></tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">2.1</td>
                                    <td class="px-6 py-3">Review các chức năng customize đang sử dụng trong EMS 1, so sánh với EMS 2. Đề xuất phương án thay thế và chi phí tùy chỉnh cần bổ sung nếu có.</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">4</td>
                                    <td class="px-6 py-3">PM / Dev Team / P.Ban</td>
                                </tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">2.2</td>
                                    <td class="px-6 py-3">Họp tổng hợp, chốt xác nhận danh sách các chức năng cần thay thế/customize (với Ban điều hành).</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">1</td>
                                    <td class="px-6 py-3">Ban điều hành / PM</td>
                                </tr>

                                <!-- Giai đoạn 3 -->
                                <tr class="bg-gray-50 font-semibold text-gray-900"><td colspan="4" class="px-6 py-2">Giai đoạn 3: Confirm customize & hoàn thiện EMS 2</td></tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">3.1</td>
                                    <td class="px-6 py-3">Các phòng ban confirm lại lần cuối danh sách customize & thay thế. Dev team đóng gói bản EMS 2 hoàn thiện (bao gồm bổ sung/customize).</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">10</td>
                                    <td class="px-6 py-3">Dev Team / P.Ban</td>
                                </tr>

                                <!-- Giai đoạn 4 -->
                                <tr class="bg-gray-50 font-semibold text-gray-900"><td colspan="4" class="px-6 py-2">Giai đoạn 4: Training & Chuẩn bị Launch</td></tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">4.1</td>
                                    <td class="px-6 py-3">Chuẩn bị guideline, tài liệu hướng dẫn sử dụng EMS 2. Training người dùng.</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">1</td>
                                    <td class="px-6 py-3">PM / HR / P.Ban</td>
                                </tr>

                                <!-- Giai đoạn 5 -->
                                <tr class="bg-gray-50 font-semibold text-gray-900"><td colspan="4" class="px-6 py-2">Giai đoạn 5: Launching</td></tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">5.1</td>
                                    <td class="px-6 py-3">Go-live EMS 2 chính thức. Song song theo dõi vận hành, hỗ trợ fix lỗi phát sinh.</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">4</td>
                                    <td class="px-6 py-3">Dev Team / P.Ban</td>
                                </tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-3">5.2</td>
                                    <td class="px-6 py-3">Sau khi hoàn tất: EMS 1 chỉ giữ chế độ tham chiếu (<span class="dotb-highlight">read-only</span>).</td>
                                    <td class="px-6 py-3 text-center text-indigo-700 font-bold">0</td>
                                    <td class="px-6 py-3">IT Ops</td>
                                </tr>
                                <tr class="bg-gray-200 font-bold text-gray-900">
                                    <td colspan="2" class="px-6 py-3 text-right">TỔNG THỜI LƯỢNG DỰ KIẾN:</td>
                                    <td class="px-6 py-3 text-center text-xl text-indigo-700">22</td>
                                    <td class="px-6 py-3">Ngày</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="p-4 text-sm text-gray-600 italic">**Lưu ý:** Timeline được tính theo số ngày làm việc (working days), bắt đầu từ ngày được chọn thủ công.</p>
                    </div>
                </div>
            </div>

            <!-- Accordion Giai đoạn 2: XÂY DỰNG WORKFLOW THEO DÕI HỌC VIÊN -->
            <div class="mb-8 border border-emerald-300 rounded-lg overflow-hidden">
                <button class="flex justify-between items-center w-full p-4 text-left font-bold text-emerald-800 bg-emerald-50" onclick="toggleAccordion('timeline-step-2')">
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-2"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"></path><path d="M12 7v5l3 3"></path></svg> Giai đoạn 2: Xây dựng Qui trình Workflow Theo dõi Học viên (Đề xuất)</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-300 accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
                <!-- Mặc định đóng -->
                <div id="timeline-step-2" class="accordion-content bg-white">
                    
                    <!-- BỔ SUNG QUY TRÌNH PHỐI HỢP XÂY DỰNG WORKFLOW -->
                    <div class="p-4 bg-indigo-50 border border-indigo-300 rounded-lg mb-6">
                        <h4 class="font-bold text-lg text-indigo-800 flex items-center mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M12 2v20M17 5H7M17 19H7M5 8h14M5 16h14"></path></svg> 
                            Quy trình Phối hợp Xây dựng Workflow
                        </h4>
                        <ul class="list-decimal ml-5 text-sm text-gray-700 space-y-2">
                            <li><span class="dotb-highlight">Tổng hợp & Xây dựng Qui trình Nghiệp vụ (HRT/P.Ban):</span> Bộ phận HRT và các P.Ban liên quan sẽ tổng hợp, chuẩn hóa và xây dựng Qui trình Workflow chi tiết (bao gồm Stage, Task, Logic).</li>
                            <li><span class="dotb-highlight">Khảo sát & Đánh giá (DOTB Team):</span> Qui trình được gửi đến DOTB Team để khảo sát tính khả thi, đánh giá mức độ phức tạp, và khả năng đáp ứng của hệ thống.</li>
                            <li><span class="dotb-highlight">Chốt Phương án & Setup:</span> IT và P.Ban cùng trao đổi để chốt phương án cuối cùng. Sau đó tiến hành setup lên hệ thống DotB V2.0. <span class="text-xs italic text-red-600">(Thời gian thực hiện phụ thuộc vào mức độ phức tạp của yêu cầu.)</span></li>
                            <li><span class="dotb-highlight">Vận hành & Test Thử (Pilot):</span> Thực hiện vận hành thử nghiệm (Pilot) trên một nhóm nhỏ, fix lỗi phát sinh và hoàn thiện trước khi Go-live toàn bộ.</li>
                        </ul>
                    </div>
                    
                    <p class="mb-4 font-semibold text-gray-700">Dựa trên Quy trình HRT/GV thủ công (Mục 1.1), 3 <span class="dotb-highlight">Template Journey</span> cốt lõi sau cần được xây dựng trên DotB V2.0 để tự động hóa và khắc phục rủi ro:</p>

                    <div class="space-y-6">
                        <!-- Journey 1: Quản lý Lớp học & Theo dõi Hàng ngày -->
                        <div class="p-4 border border-blue-200 rounded-lg bg-blue-50">
                            <h4 class="font-bold text-blue-700 mb-2 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg> 1. Template Journey: CLASS MANAGEMENT (Chu kỳ 1 Unit)</h4>
                            <p class="text-sm text-gray-600 mb-3 italic">Mục tiêu: Tự động hóa việc mở lớp, phân bổ tài nguyên và ghi nhận tình hình học tập hàng ngày (thay thế Class Tracker & 20-Minute Practice thủ công).</p>
                            <!-- SỬA LỖI LAYOUT: Thêm 'items-start' để căn chỉnh các cột theo chiều dọc -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 items-start">
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 1: KHỞI TẠO LỚP</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: <span class="dotb-highlight">Hệ thống tạo Class Tracker/Tasklist</span> cho GV/HRT.</li>
                                        <li>TASK: HRT tạo <span class="dotb-highlight">"20-Minute Practice Task"</span> cho GV tutor.</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 2: HỌC TẬP HẰNG NGÀY</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: GV <span class="dotb-highlight">Checklist tiến độ</span> (Buổi học, Lesson, Mục tiêu).</li>
                                        <li>TASK: HRT/GV nhập <span class="dotb-highlight">"Tình hình Học tập Hằng ngày"</span>.</li>
                                        <li>TASK: <span class="dotb-highlight">Gửi ảnh/video</span> PH.</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 3: KẾT THÚC BUỔI</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Hoàn thành Task</span> nếu GV đã checklist.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Journey 2: Đánh giá & Phản hồi (Assessment Cycle) -->
                        <div class="p-4 border border-green-200 rounded-lg bg-green-50">
                            <h4 class="font-bold text-green-700 mb-2 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M10 20.73a7 7 0 0 1-2.92-1.95V17c-2.73-.77-4-2-4-3a5.5 5.5 0 0 1 5-5.5"></path><path d="M12 20a7.48 7.48 0 0 1-1.2-2.31"></path><path d="M12 4.27a7 7 0 0 1 2.92 1.95V7c2.73.77 4 2 4 3a5.5 5.5 0 0 1-5 5.5"></path><path d="M12 4v0"></path></svg> 2. Template Journey: ASSESSMENT CYCLE (Chu kỳ 2 Units)</h4>
                            <p class="text-sm text-gray-600 mb-3 italic">Mục tiêu: Tự động hóa quá trình đánh giá (Quiz/Unit Comment/Gradebook) và gửi Feedback tự động/dịch thuật (thay thế việc copy/paste thủ công của HRT).</p>
                            <!-- SỬA LỖI LAYOUT: Thêm 'items-start' -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 items-start">
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 1: CHUẨN BỊ</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Tự động tạo Quiz Template</span> (trước 1 tuần).</li>
                                        <li>TASK: HRT xác nhận lịch/chuẩn bị <span class="dotb-highlight">Gradebook Template</span>.</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 2: NHẬP LIỆU/TỔNG HỢP</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: GV <span class="dotb-highlight">Nhập điểm Quiz/Gradebook</span>.</li>
                                        <li>TASK: GV/HRT <span class="dotb-highlight">Nhập Teacher Comment</span>.</li>
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Tạo AI Feedback & Tự động dịch</span>.</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 3: GỬI PHẢN HỒI</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Tự động gửi Unit Comment/Gradebook</span> cho PH.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Journey 3: Cảnh báo & Tái phí (Risk & Renew) -->
                        <div class="p-4 border border-red-200 rounded-lg bg-red-50">
                            <h4 class="font-bold text-red-700 mb-2 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg> 3. Template Journey: RISK & RENEW ALERT (Tái phí & Xử lý Bất ổn)</h4>
                            <p class="text-sm text-gray-600 mb-3 italic">Mục tiêu: Đảm bảo tính chủ động cho HRT/PM bằng cách tạo cảnh báo tự động khi phát hiện rủi ro hoặc sắp hết khóa học (thay thế việc theo dõi thủ công).</p>
                            <!-- SỬA LỖI LAYOUT: Thêm 'items-start' -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 items-start">
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 1: PHÁT HIỆN RỦI RO</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Tự động kích hoạt Cảnh báo</span> khi: Điểm kém, Hạnh vi bất ổn (dựa trên Teacher Comment), Vắng quá mức.</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 2: GIAI ĐOẠN RENEW</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: Hệ thống <span class="dotb-highlight">Tự động tạo Task "Renew"</span> cho HRT (trước X ngày kết thúc khóa).</li>
                                    </ul>
                                </div>
                                <div class="p-3 border rounded-lg bg-white shadow-sm">
                                    <p class="font-semibold text-sm text-gray-800">STAGE 3: XỬ LÝ</p>
                                    <ul class="list-disc ml-5 text-xs mt-1 space-y-1">
                                        <li>TASK: HRT thực hiện <span class="dotb-highlight">Xử lý cảnh báo/Tư vấn tái phí</span>.</li>
                                        <li>TASK: PM <span class="dotb-highlight">Phản hồi Báo cáo Rủi ro</span>.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NỘI DUNG TAB 4: NGUỒN LỰC & CHI PHÍ (ĐÃ GỘP) -->
        <div id="tab-4" role="tabpanel" class="tab-content p-6 hidden">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mr-2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                4. Nguồn lực & Chi phí
            </h3>
            <p class="text-gray-600 mb-6 italic">Phân bổ nguồn lực nội bộ (IT, Nghiệp vụ) phối hợp với đối tác DOTB và dự toán chi phí Phát triển (CAPEX) và Vận hành (OPEX) trên cơ sở 5.000 học viên.</p>
            <!-- KHU VỰC SUB-TAB CHO TAB 4 -->
            <div class="flex space-x-4 mb-6 border-b pb-4">
                <button data-sub-tab-id="sub-tab-4-1" data-main-tab-id="tab-4" class="sub-tab-button active px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-4-1', 'tab-4')">
                    4.1. Phân bổ Nguồn lực
                </button>
                <button data-sub-tab-id="sub-tab-4-2" data-main-tab-id="tab-4" class="sub-tab-button px-4 py-2 text-sm text-gray-700 hover:bg-emerald-100 transition duration-150 ease-in-out" onclick="switchSubTab('sub-tab-4-2', 'tab-4')">
                    4.2. Dự toán Chi phí
                </button>
            </div>

            <!-- NỘI DUNG SUB-TAB 4.1 -->
            <div id="sub-tab-4-1" class="sub-tab-content">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-600 mr-2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    4.1. Phân bổ Nguồn lực (Đội ngũ Thực hiện)
                </h3>
                <div class="bg-white shadow-md rounded-lg overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 text-sm">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">Vai trò</th>
                                <th scope="col" class="px-6 py-3">Tên nhân sự / Số lượng</th>
                                <th scope="col" class="px-6 py-3">Tỉ lệ tham gia (Dự kiến)</th>
                                <th scope="col" class="px-6 py-3">Nhiệm vụ chính</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">Team DOTB</td>
                                <td class="px-6 py-4 whitespace-nowrap">Dev Team</td>
                                <td class="px-6 py-4 whitespace-nowrap">100%</td>
                                <td class="px-6 py-4">Phát triển Core V2.0, Data Migration, Build Workflow, Hỗ trợ Go-live/Fix lỗi.</td>
                            </tr>
							<tr class="bg-blue-50">
                                <td class="px-6 py-4 whitespace-nowrap font-semibold text-blue-700">Team IT (Tổng phụ trách)</td>
                                <td class="px-6 py-4 whitespace-nowrap">PM + QA + IT Ops</td>
                                <td class="px-6 py-4 whitespace-nowrap">100% (Theo các task)</td>
                                <td class="px-6 py-4">Phụ trách làm việc với đối tác DOTB và nội bộ KAPLA, phối hợp nghiệp vụ, kiểm tra (QA/UAT), và duyệt triển khai.</td>
                            </tr>

                            <tr class="bg-yellow-50">
                                <td class="px-6 py-4 whitespace-nowrap font-semibold text-yellow-800">RD/RM/SCM/CM</td>
                                <td class="px-6 py-4 whitespace-nowrap">RD/RM/SMC/HRT/TCH</td>
                                <td class="px-6 py-4 whitespace-nowrap">80%</td>
                                <td class="px-6 py-4"><span class="dotb-highlight text-yellow-800">Giai đoạn 1 (Upgrade):</span> Góp ý về các vấn đề cần nâng cấp V2.0. <span class="dotb-highlight text-yellow-800">Giai đoạn 2 (Workflow):</span> Hỗ trợ thông tin xây dựng Stage/Task cần thiết cho Workflow.</td>
                            </tr>
                            <tr class="bg-emerald-50">
                                <td class="px-6 py-4 whitespace-nowrap font-semibold text-emerald-800">Team HRT</td>
                                <td class="px-6 py-4 whitespace-nowrap">2 - 3 người</td>
                                <td class="px-6 py-4 whitespace-nowrap">20%</td>
                                <td class="px-6 py-4">Hỗ trợ thêm yêu cầu nghiệp vụ, kiểm tra (UAT/Pilot) và vận hành sau khi hoàn tất hệ thống.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>                
            </div>

            <!-- NỘI DUNG SUB-TAB 4.2 -->
            <div id="sub-tab-4-2" class="sub-tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mr-2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                    4.2. Dự toán Chi phí
                </h3>
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg">
                    <p class="text-green-700 font-medium mb-4">Các hạng mục chi phí được xây dựng phân tích theo <span class="dotb-highlight text-green-800">5.000 học viên</span>.</p>
                    
                    <!-- BẢNG SO SÁNH VẬN HÀNH -->
                    <div class="overflow-x-auto shadow-md rounded-lg mb-6">
                        <table class="min-w-full divide-y divide-gray-200 text-sm">
                            <thead class="text-xs uppercase cost-header">
                                <tr>
                                    <th scope="col" class="px-6 py-3 w-1/4 text-center">Tiêu chí</th>
                                    <th scope="col" class="px-6 py-3 w-1/4 text-center">Chi phí Vận hành HIỆN TẠI (V1)</th>
                                    <th scope="col" class="px-6 py-3 w-1/4 text-center">Chi phí Vận hành DỰ KIẾN (V2.0)</th>
                                    <th scope="col" class="px-6 py-3 w-1/4 text-center">Hiệu quả Tài chính</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-3 font-semibold text-gray-800">Đơn giá/Học viên/Tháng</td>
                                    <td class="px-6 py-3 text-center text-red-600">5.760 VNĐ/HS</td>
                                    <td class="px-6 py-3 text-center text-emerald-600">4.400 VNĐ/HS</td>
                                    <td class="px-6 py-3 text-center">-1.360 VNĐ/HS</td>
                                </tr>
                                <tr class="cost-comparison">
                                    <td class="px-6 py-3 font-semibold text-gray-800">TỔNG CHI PHÍ VẬN HÀNH/Tháng (5.000 HS)</td>
                                    <td class="px-6 py-3 text-center">28.800.000 VNĐ</td>
                                    <td class="px-6 py-3 text-center">22.000.000 VNĐ</td>
                                    <td class="px-6 py-3 text-center"><span class="text-emerald-800">Tiết kiệm 6.800.000 VNĐ</span></td>
                                </tr>
                                <tr class="cost-comparison">
                                    <td class="px-6 py-3 font-semibold text-gray-800">TỔNG CHI PHÍ VẬN HÀNH/Năm</td>
                                    <td class="px-6 py-3 text-center">345.600.000 VNĐ</td>
                                    <td class="px-6 py-3 text-center">264.000.000 VNĐ</td>
                                    <td class="px-6 py-3 text-center"><span class="text-emerald-800">Tiết kiệm 81.600.000 VNĐ</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- GHI CHÚ QUAN TRỌNG VỀ SERVER UP-SCALE -->
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded-lg text-sm mb-6">
                        <p class="font-semibold text-blue-800">Lưu ý quan trọng về Chi phí Server Private:</p>
                        <p class="text-blue-700 mt-1">Chi phí Server (20M/tháng) là mức phí dự kiến cho 5.000 HS. <span class="dotb-highlight text-blue-800">Server có thể Up-scale tăng dần theo số học viên thực tế</span>, giúp tối ưu hóa chi phí đầu tư ban đầu.</p>
                    </div>

                    <!-- Bảng Chi phí Chi tiết -->
                    <h4 class="font-bold text-lg text-green-800 flex items-center mb-3">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"></path><path d="M12 7v5l3 3"></path></svg>
                        Dự toán Chi phí Chi tiết
                    </h4>
                    <div id="cost-data-table" class="overflow-x-auto shadow-md rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200 text-sm">
                            <thead class="text-xs uppercase cost-header">
                                <tr>
                                    <th scope="col" class="px-6 py-3 w-4/12 text-left">Hạng mục chi phí</th>
                                    <th scope="col" class="px-6 py-3 w-2/12 text-center">Đơn vị tính / SL</th>
                                    <th scope="col" class="px-6 py-3 w-2/12 text-center">Đơn giá (VNĐ)</th>
                                    <th scope="col" class="px-6 py-3 w-4/12 text-center">Chi phí TỔNG (VNĐ)</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                
                                <!-- Chi phí Phát triển (Manday) -->
                                <tr class="cost-sub-header"><td colspan="4" class="px-6 py-2">A. CHI PHÍ PHÁT TRIỂN BAN ĐẦU (CAPEX - DOTB Team)</td></tr>
                                
                                <tr>
                                    <td class="px-6 py-3 font-medium text-gray-900">1. Migration Chức năng Custom (V1 -> V2)</td>
                                    <td class="px-6 py-3 text-center text-red-600">5 Mandays</td>
                                    <td class="px-6 py-3 text-center">3.000.000</td>
                                    <td class="px-6 py-3 text-center font-bold text-red-700">15.000.000</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-medium text-gray-900">2. Custom Setup Template Journey (Workflow)</td>
                                    <td class="px-6 py-3 text-center text-red-600">10 Mandays</td>
                                    <td class="px-6 py-3 text-center">3.000.000</td>
                                    <td class="px-6 py-3 text-center font-bold text-red-700">30.000.000</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-medium text-gray-900">3. Cài đặt Source Code DOTB V2 lên Server Riêng</td>
                                    <td class="px-6 py-3 text-center text-red-600">10 Mandays</td>
                                    <td class="px-6 py-3 text-center">3.000.000</td>
                                    <td class="px-6 py-3 text-center font-bold text-red-700">30.000.000</td>
                                </tr>
                                <tr class="cost-total-capex">
                                    <td colspan="3" class="px-6 py-3 text-right">TỔNG CHI PHÍ PHÁT TRIỂN DỰ KIẾN (A)</td>
                                    <td class="px-6 py-3 text-center">75.000.000</td>
                                </tr>

                                <!-- Chi phí Vận hành (OPEX) -->
                                <tr class="cost-sub-header"><td colspan="4" class="px-6 py-2">B. CHI PHÍ VẬN HÀNH (OPEX - Hàng tháng)</td></tr>
                                
                                <tr>
                                    <td class="px-6 py-3 font-medium text-gray-900">4. Thuê Server Private vận hành DotB V2</td>
                                    <td class="px-6 py-3 text-center text-blue-600">1 Tháng</td>
                                    <td class="px-6 py-3 text-center">20.000.000</td>
                                    <td class="px-6 py-3 text-center font-bold text-blue-700">20.000.000</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-medium text-gray-900">5. DOTB charge phí Bảo trì vận hành Server Riêng</td>
                                    <td class="px-6 py-3 text-center text-blue-600">1 Tháng</td>
                                    <td class="px-6 py-3 text-center">3.000.000</td>
                                    <td class="px-6 py-3 text-center font-bold text-blue-700">3.000.000</td>
                                </tr>

                                <!-- Tổng cộng -->
                                <tr class="cost-total">
                                    <td colspan="3" class="px-6 py-3 text-right">TỔNG CHI PHÍ VẬN HÀNH DỰ KIẾN (B/Tháng)</td>
                                    <td class="px-6 py-3 text-center">23.000.000</td>
                                </tr>
                                
                                <tr class="cost-sub-header"><td colspan="4" class="px-6 py-2">C. TỔNG CỘNG</td></tr>
                                <tr class="cost-total">
                                    <td colspan="3" class="px-6 py-3 text-right">TỔNG CHI PHÍ DỰ ÁN (A + Bx12) - Năm đầu tiên</td>
                                    <td class="px-6 py-3 text-center text-xl">351.000.000</td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // Khởi tạo icons
        lucide.createIcons();

        // Hàm chuyển đổi Tab chính
        function switchTab(tabId) {
            // 1. Xử lý Tab chính
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

            document.querySelector(`.tab-button[data-tab-id="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.remove('hidden');
            
            // 2. TÌM VÀ KÍCH HOẠT SUB-TAB ĐẦU TIÊN (NẾU CÓ)
            const firstSubTabButton = document.querySelector(`#${tabId} .sub-tab-button`);
            if (firstSubTabButton) {
                // Lấy subTabId từ nút đầu tiên
                const firstSubTabId = firstSubTabButton.dataset.subTabId;
                // Gọi hàm switchSubTab để xử lý logic (ẩn/hiện/active)
                switchSubTab(firstSubTabId, tabId);
            }
        }

        // Hàm chuyển đổi Sub-tab
        function switchSubTab(subTabId, mainTabId) {
            // 1. Ẩn TẤT CẢ sub-tab content trong tab chính hiện tại
            document.querySelectorAll(`#${mainTabId} .sub-tab-content`).forEach(content => content.classList.add('hidden'));
            
            // 2. Bỏ active TẤT CẢ sub-tab button trong tab chính hiện tại
            document.querySelectorAll(`#${mainTabId} .sub-tab-button`).forEach(btn => btn.classList.remove('active'));

            // 3. Kích hoạt (active) sub-tab button được click
            document.querySelector(`.sub-tab-button[data-sub-tab-id="${subTabId}"]`).classList.add('active');
            
            // 4. Hiển thị sub-tab content tương ứng
            document.getElementById(subTabId).classList.remove('hidden');
            
            // Sau khi chuyển sub-tab, đảm bảo sub-tab-2-1 được hiển thị thì reset trạng thái accordion
            if (subTabId === 'sub-tab-2-1') {
                const serverAccordionContent = document.getElementById('server-private-solution');
                const serverAccordionButton = serverAccordionContent.previousElementSibling;
                
                // Đảm bảo accordion server private luôn đóng khi mới chuyển sang tab 2.1
                serverAccordionContent.classList.remove('open');
                serverAccordionButton.querySelector('.accordion-icon').classList.remove('rotate-180');

                // Đảm bảo hiệu ứng blink hoạt động khi đóng
                serverAccordionButton.classList.remove('no-blink');
            }
        }

        // Hàm chuyển đổi Accordion (Expand/Collapse)
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const button = content.previousElementSibling;
            const icon = button.querySelector('.accordion-icon');

            content.classList.toggle('open');
            icon.classList.toggle('rotate-180');
            
            // Toggle animation class based on state (chỉ blink khi đóng)
            if (content.classList.contains('open')) {
                button.classList.add('no-blink');
            } else {
                button.classList.remove('no-blink');
            }
        }

        // Khởi tạo: Mặc định mở Tab 1 (và sub-tab 1.1)
        window.onload = function() {
            // Kích hoạt Tab 1 mặc định
            switchTab('tab-1');
        };
    </script>
</body>
</html>
